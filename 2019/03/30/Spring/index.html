<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><meta name="theme-color" content="#2d4356"><meta name="baidu-site-verification"><title>Spring | willardteriberka</title><link rel="stylesheet" type="text/css" href="/css/style.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.png"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="willardteriberka" type="application/atom+xml">
</head><link rel="stylesheet" type="text/css" href="/plugins/prettify/doxy.css"><script type="text/javascript" src="/js/ready.js" async></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"><body class="night"><div class="mobile-head" id="mobile-head"><div class="navbar-icon"><span></span><span></span><span></span></div><div class="navbar-title"><a href="/">LITREILY</a></div><div class="navbar-search"><!--= show a circle here--></div></div><div class="h-wrapper" id="menu"><nav class="h-head box"><div class="m-hdimg"><a class="hdimg img" href="/"><img class="nofancybox" src="/img/profile.jpg" width="128" height="128"></a><h1 class="ttl"><a href="/">willardteriberka</a></h1></div><p class="m-desc">The difference between people is involved in the spare time.<br>----------Einstein</br></p><div class="m-nav"><ul><li><span class="dot">●</span><a href="/archives/">归档</a></li><li><span class="dot">●</span><a href="/categories/">分类</a></li><li><span class="dot">●</span><a href="/tags/">标签</a></li><li><span class="dot">●</span><a href="/about/">关于</a></li><li><span class="dot">●</span><a href="/atom.xml">RSS</a></li><li class="m-sch"><form class="form" id="j-formsch" method="get"><input class="txt" type="text" id="local-search-input" name="q" value="搜索" onfocus="if(this.value=='搜索'){this.value='';}" onblur="if(this.value==''){this.value='搜索';}"><input type="text" style="display:none;"></form></li></ul><div id="local-search-result"></div></div></nav></div><div id="back2Top"><a class="fa fa-arrow-up" title="Back to top" href="#"></a></div><div class="box" id="container"><div class="l-wrapper"><div class="l-content box"><div class="l-post l-post-art"><article class="p-art"><div class="p-header box"><h1 class="p-title">Spring</h1><div class="p-info"><span class="p-date"><i class="fa fa-calendar"></i><a href="/2019/03/30/Spring/">2019-03-30</a></span><span class="p-category"><i class="fa fa-folder"></i><a href="/categories/%E6%A1%86%E6%9E%B6/">框架</a></span><span class="p-view" id="busuanzi_container_page_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_page_pv"></span></span></div></div><div class="p-content"><h2 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h2><p>[TOC]</p>
<h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h2><h3 id="IOC-inversion-of-control-控制反转"><a href="#IOC-inversion-of-control-控制反转" class="headerlink" title="IOC inversion of control  控制反转"></a>IOC inversion of control  控制反转</h3><p>将对象创建的任务交给Spring的IOC容器去控制，给我们的项目松耦合。</p>
<h3 id="DI-dependency-injection-依赖注入"><a href="#DI-dependency-injection-依赖注入" class="headerlink" title="DI dependency injection 依赖注入"></a>DI dependency injection 依赖注入</h3><p>因为我们将对象的创建已经交给IOC容器去做了，那么自然就没有new的过程，那我们就没办法在创建对象的时候写入参数了。 如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">A a = <span class="keyword">new</span> a(<span class="string">&quot;aaa&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>这个时候就需要使用DI 给我们的对象注入所需的内容。</p>
<h3 id="spring-core的5大jar包"><a href="#spring-core的5大jar包" class="headerlink" title="spring core的5大jar包"></a>spring core的5大jar包</h3><ul>
<li><strong>commons-logging-1.1.3.jar 日志</strong></li>
<li><strong>spring-beans-3.2.5.RELEASE.jar bean节点</strong></li>
<li><strong>spring-context-3.2.5.RELEASE.jar spring上下文节点</strong></li>
<li><strong>spring-core-3.2.5.RELEASE.jar spring核心功能</strong></li>
<li><strong>spring-expression-3.2.5.RELEASE.jar spring表达式相关表</strong></li>
</ul>
<h2 id="名称空间相关"><a href="#名称空间相关" class="headerlink" title="名称空间相关"></a>名称空间相关</h2><p>头文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:p</span>=<span class="string">&quot;http://www.springframework.org/schema/p&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span>   </span><br><span class="line"></span><br><span class="line">xmlns:p  代表引用P标签，可以在Bean.xml中使用p标签进行快速配置</span><br><span class="line">xmlns:context 代表引用context 可以使用注解</span><br><span class="line">xsi:schemaLocation  </span><br></pre></td></tr></table></figure>



<table>
<thead>
<tr>
<th>名称空间</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>xmlns:p</td>
<td>代表引用P标签，可以在Bean.xml中使用p标签进行快速配置</td>
</tr>
<tr>
<td>xmlns:context</td>
<td>代表引用context名称空间， 可以使用注解</td>
</tr>
<tr>
<td>xsi:schemaLocation</td>
<td></td>
</tr>
</tbody></table>
<h2 id="配置文件标签查阅"><a href="#配置文件标签查阅" class="headerlink" title="配置文件标签查阅"></a>配置文件标签查阅</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">Bean</span> <span class="attr">id</span>=<span class="string">&quot;bean对象ID，用于给ApplicationContent通过配置文件查找对应对象所用的标识 id之间不可重复&quot;</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">&quot;类路径 如：cn.snake.xxx 用于给IOC容器通过反射创建该类&quot;</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">scope</span>=<span class="string">&quot;对象的作用范围，此处与项目类型有别，</span></span></span><br><span class="line"><span class="tag"><span class="string">           非web应用只有两个参数可写，</span></span></span><br><span class="line"><span class="tag"><span class="string">             singleton：对象创建为单例模式，</span></span></span><br><span class="line"><span class="tag"><span class="string">             prototype：对象创建为多例模式；</span></span></span><br><span class="line"><span class="tag"><span class="string">           而web项目的话会多几个</span></span></span><br><span class="line"><span class="tag"><span class="string">             request:请求</span></span></span><br><span class="line"><span class="tag"><span class="string">             session：会话</span></span></span><br><span class="line"><span class="tag"><span class="string">             global—session：集群会话&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">init-method</span>=<span class="string">&quot;只在为scope为prototype有效，用于对象创建时自动执行该Bean中的某方法&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">destroy-method</span>=<span class="string">&quot;只在为scope为prototype有效，用于对象销毁时自动执行该Bean中的某方法&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">autowire</span>=<span class="string">&quot;自动装配，可选参数有：byNmame(通过名称装配)和byType(通过对象类型装配)&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">factory-method</span>=<span class="string">&quot;工厂类创建对象所用，这里写返回所需对象的方法名&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">factory-bean</span>=<span class="string">&quot;非静态工厂类用，此处写已配置的BeanID&quot;</span></span></span><br><span class="line"><span class="tag">      &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">index</span>=<span class="string">&quot;下标从0开始，表示要注入构造方法的第几个参数&quot;</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">name</span>=<span class="string">&quot;表示方法参数的名称&quot;</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">type</span>=<span class="string">&quot;表示要参数的类型，可以注入基本类型&quot;</span></span></span><br><span class="line"><span class="tag">                 </span></span><br><span class="line"><span class="tag">                     <span class="attr">value</span>=<span class="string">&quot;要注入的值或内容&quot;</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">ref</span>=<span class="string">&quot;当要注入的内容不是基本类型时，如date、dao对象，应通过ref注入，但前提是需要有该类的Bean标签，假设已有一个date类的标签ID为&#x27;date&#x27;，ref=&quot;</span><span class="attr">date</span>&quot; &quot;&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>  <span class="attr">name</span>=<span class="string">&quot;set方法的名称，如setuserdao,则此处写userdao&quot;</span> </span></span><br><span class="line"><span class="tag">              <span class="attr">ref</span>=<span class="string">&quot;当要注入的内容不是基本类型时，如date、dao对象，应通过ref注入，但前提是需要有该类的Bean标签，假设已有一个date类的标签ID为&#x27;date&#x27;，ref=&quot;</span><span class="attr">date</span>&quot; &quot;&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Bean</span>&gt;</span>       </span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--AOP配置部分--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;切入点表达式名称&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;此处写法与pointcut一致&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:pointcut</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--example：</span></span><br><span class="line"><span class="comment">    &lt;aop:pointcut id=&quot;切入点表达式名称&quot; expression=&quot;execution(* com.snake.service.impl.*.*(..)&quot;&gt;</span></span><br><span class="line"><span class="comment">&lt;/aop:pointcut&gt;--&gt;</span>    </span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">id</span>=<span class="string">&quot;aop的名称，一般可以说明是什么通知，如managerAdvice&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;引入切面类&quot;</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;切入点表达式名称&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;此处写法与pointcut一致&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:pointcut</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">&quot;前置通知方法名&quot;</span> <span class="attr">pointcut</span>=<span class="string">&quot;与后面的pointcut-ref选其一，用于使用切入点表达式来确定那些切入点需要执行这个前置通知&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;引用前面或该aspect中定义的pointcut&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:before</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:after-returning</span> <span class="attr">method</span>=<span class="string">&quot;后置通知方法名&quot;</span> <span class="attr">pointcut</span>=<span class="string">&quot;与后面的pointcut-ref选其一，用于使用切入点表达式来确定那些切入点需要执行这个后置通知&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;引用前面或该aspect中定义的pointcut&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:after-returning</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:after-throwing</span> <span class="attr">method</span>=<span class="string">&quot;异常通知方法名&quot;</span> <span class="attr">pointcut</span>=<span class="string">&quot;与后面的pointcut-ref选其一，用于使用切入点表达式来确定那些切入点需要执行这个异常通知&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;引用前面或该aspect中定义的pointcut&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:after-throwing</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:after</span> <span class="attr">method</span>=<span class="string">&quot;最终通知方法名&quot;</span> <span class="attr">pointcut</span>=<span class="string">&quot;与后面的pointcut-ref选其一，用于使用切入点表达式来确定那些切入点需要执行这个最终通知&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;引用前面或该aspect中定义的pointcut&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:after</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:around</span> <span class="attr">method</span>=<span class="string">&quot;环绕通知方法名&quot;</span> <span class="attr">pointcut</span>=<span class="string">&quot;与后面的pointcut-ref选其一，用于使用切入点表达式来确定那些切入点需要执行这个环绕通知&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;引用前面或该aspect中定义的pointcut&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:around</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;包名&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span>                                </span><br><span class="line"><span class="comment">&lt;!--开启注解扫描器，用于xml配置文件与java注解搭配使用spring ioc时使用，只有开启注解扫描器之后，ioc才会去扫描方法中的注解，base-package中写的是所要扫描的包--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:aspectj-autoproxy</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--开启切面自动代理--&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="注解相关查阅"><a href="#注解相关查阅" class="headerlink" title="注解相关查阅"></a>注解相关查阅</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ComponentScan(&quot;xxx&quot;)</span><span class="comment">//xml开启注解扫描 用注解配置</span></span><br><span class="line"><span class="comment">//example : @ComponentScan(&quot;cn.snake&quot;)n.snake</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span> <span class="comment">//指定把一个对象加入IOC容器 当不指定BeanId时，默认是当前类名且首字母小写。</span></span><br><span class="line">	(value=<span class="string">&quot;xxx&quot;</span>)<span class="comment">//用于指定Beanid,默认可不写</span></span><br><span class="line"><span class="meta">@Repository</span> <span class="comment">//作用同@Component； 在持久层使用</span></span><br><span class="line"><span class="meta">@Service</span> <span class="comment">//作用同@Component； 在业务逻辑层使用</span></span><br><span class="line"><span class="meta">@Controller</span> <span class="comment">//作用同@Component； 在控制层使用</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//注入数据</span></span><br><span class="line"><span class="meta">@Autowired</span> <span class="comment">//自动按照类型注入，如果有两个类型匹配的话，就会按照对象成去匹配BeanID，否则就报错。</span></span><br><span class="line"><span class="meta">@qualifier</span> <span class="comment">/*在自动按照类型注入的基础上，指定注入某个类来注入该对象。 且在对象上不能单独使用，必须依赖autowired。</span></span><br><span class="line"><span class="comment">	example:</span></span><br><span class="line"><span class="comment">	@qualifier（value=&quot;类名&quot;）只有一个参数可不写value。*/</span></span><br><span class="line"><span class="meta">@Resource</span> <span class="comment">/*依赖关系  相当于autowired和qualifier的结合</span></span><br><span class="line"><span class="comment">如果@Resource不指定值，那么就根据类型来找，相同的类型在IOC容器中不能有两个</span></span><br><span class="line"><span class="comment">如果@Resource指定了值，那么就根据名字来找</span></span><br><span class="line"><span class="comment">example:</span></span><br><span class="line"><span class="comment">    @Resource(name = &quot;userDao&quot;)</span></span><br><span class="line"><span class="comment">    private UserDao userDao;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@value</span> <span class="comment">//用于注入基本类型和String类型的数据，不能注入集合类型</span></span><br><span class="line">	<span class="comment">//example:@value(value=&quot;&quot;) value参数中可以使用spEL(spring的el表达式)</span></span><br><span class="line"><span class="meta">@scope</span> <span class="comment">//用于表示当前对象的作用范围 可选值：singleton（单例）、 prototype（多例）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Java类配置</span></span><br><span class="line"><span class="meta">@Configuration</span><span class="comment">//表明该类是配置类</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@ComponentScan(&quot;xxx&quot;)</span><span class="comment">//xml开启注解扫描 用注解配置</span></span><br><span class="line"><span class="comment">//example : @ComponentScan(&quot;cn.snake&quot;)n.snake</span></span><br><span class="line"><span class="comment">//开启扫描器，扫描snake包下的类</span></span><br><span class="line"><span class="comment">//也可以指定多个基础包</span></span><br><span class="line"><span class="comment">//也可以指定类型</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@ContextConfiguration</span><span class="comment">//用于给测试类加载配置类,前提导入spring test包</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span> </span><br><span class="line"><span class="comment">/*用途类似XML中的工厂类模式，用于修饰方法并通过方法的返回值得到对象，并将方法的返回值对象存入Spring ioc容器中，容器中Bean的id默认为方法名，如在使用jar包时，*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Import</span><span class="comment">/*用于导入其他配置类*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Aspect</span> <span class="comment">//指定一个类为切面类 </span></span><br><span class="line"><span class="meta">@Pointcut(&quot;execution( cn.snake.service.*(..))&quot;)</span> <span class="comment">//指定切入点表达式</span></span><br><span class="line"><span class="meta">@Before(&quot;pointCut_()&quot;)</span> <span class="comment">//前置通知: 目标方法之前执行</span></span><br><span class="line">   或 <span class="meta">@Before(&quot;execution(* aa.*.*(..))&quot;)</span><span class="comment">//单独设置拦截表达式</span></span><br><span class="line"><span class="meta">@After(&quot;pointCut_()&quot;)</span> <span class="comment">//后置通知：目标方法之后执行（始终执行）</span></span><br><span class="line">    或<span class="meta">@After(&quot;execution(* aa.*.*(..))&quot;)</span><span class="comment">//单独设置拦截表达式</span></span><br><span class="line"><span class="meta">@AfterReturning(&quot;pointCut_()&quot;)</span> <span class="comment">//返回后通知： 执行方法结束前执行(异常不执行)</span></span><br><span class="line"><span class="meta">@AfterThrowing(&quot;pointCut_()&quot;)</span> <span class="comment">//异常通知: 出现异常时候执行</span></span><br><span class="line"><span class="meta">@Around(&quot;pointCut_()&quot;)</span> <span class="comment">//环绕通知： 环绕目标方法执行</span></span><br></pre></td></tr></table></figure>



<h2 id="IOC"><a href="#IOC" class="headerlink" title="IOC"></a>IOC</h2><h3 id="使用ioc容器创建Bean对象的几种方式"><a href="#使用ioc容器创建Bean对象的几种方式" class="headerlink" title="使用ioc容器创建Bean对象的几种方式"></a>使用ioc容器创建Bean对象的几种方式</h3><h4 id="1-非工厂类创建"><a href="#1-非工厂类创建" class="headerlink" title="1.非工厂类创建"></a>1.非工厂类创建</h4><h5 id="1-无参构造"><a href="#1-无参构造" class="headerlink" title="1.无参构造"></a>1.无参构造</h5><p>User.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.snake.domain;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String account;</span><br><span class="line">    <span class="keyword">private</span> String user;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Date createTime;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">User</span><span class="params">()</span></span>&#123;</span><br><span class="line">                </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//get .. set</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Bean.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cn.snake.domain.user&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="2-有参构造"><a href="#2-有参构造" class="headerlink" title="2.有参构造"></a>2.有参构造</h5><h6 id="1-基本类型"><a href="#1-基本类型" class="headerlink" title="1.基本类型"></a>1.基本类型</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.snake.domain;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String account;</span><br><span class="line">    <span class="keyword">private</span> String user;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Date createTime;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//get .. set</span></span><br><span class="line">    <span class="comment">//有参构造函数</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(String id, String account)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Bean.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cn.snake.domain.user&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">&quot;0&quot;</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.int&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span><span class="comment">&lt;!--第一个参数 id--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">&quot;1&quot;</span> <span class="attr">name</span>=<span class="string">&quot;account&quot;</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.String&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span><span class="comment">&lt;!--第二个参数 account--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>定位参数可以用三种参数定位 index、name、type,三种之中只有name是最容易定位且最常用的。</p>
<h6 id="2-有非基本类型"><a href="#2-有非基本类型" class="headerlink" title="2.有非基本类型"></a>2.有非基本类型</h6><p>user.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.snake.domain;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String account;</span><br><span class="line">    <span class="keyword">private</span> String user;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Date createTime;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//get .. set</span></span><br><span class="line">    <span class="comment">//有参构造函数</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(String id, String account,Date createTime)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">        <span class="keyword">this</span>.Date createTime = createTime;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>Bean.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Bean</span> <span class="attr">id</span>=<span class="string">&quot;Date&quot;</span> <span class="attr">class</span>=<span class="string">&quot;java.util.Date&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--因为时间是非基本类型，所以需要使用ioc管理date类型，然后使用ref应用该Bean对象--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">Bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cn.snake.domain.user&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">&quot;0&quot;</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.int&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span><span class="comment">&lt;!--第一个参数 id--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">&quot;1&quot;</span> <span class="attr">name</span>=<span class="string">&quot;account&quot;</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.String&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span><span class="comment">&lt;!--第二个参数 account--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">&quot;2&quot;</span> <span class="attr">name</span>=<span class="string">&quot;createTime&quot;</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.String&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;Date&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span><span class="comment">&lt;!--第三个参数 createTime--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Bean</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="2-工厂类创建"><a href="#2-工厂类创建" class="headerlink" title="2.工厂类创建"></a>2.工厂类创建</h4><h5 id="1-静态工厂类创建"><a href="#1-静态工厂类创建" class="headerlink" title="1.静态工厂类创建"></a>1.静态工厂类创建</h5><p>工厂类对象是帮助我们获取对象的，案例中返回值是userDao对象，这种情况就好比我们在使用第三方jar包的时候，我们并不知道我们所需要用到的对象是什么，或者在哪里，但是jar包中提供了工厂类方法来帮助我们获取所需要的对象，但是这个对象也需要交给Spring-ioc管理。</p>
<p>factory.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Factory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> UserDao <span class="title">getUserDao</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> UserDao();</span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Bean.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Bean</span> <span class="attr">id</span>=<span class="string">&quot;UserDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cn.snake.Factory.Factory&quot;</span> <span class="attr">factory-method</span>=<span class="string">&quot;getUserDao&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--调用返回userDao对象的工厂类方法 案例中getUserDao返回UserDao对象给我们调用方法，factory-method参数中写返回我们所需对象的方法--&gt;</span></span><br></pre></td></tr></table></figure>



<h5 id="2-非静态工厂类创建"><a href="#2-非静态工厂类创建" class="headerlink" title="2.非静态工厂类创建"></a>2.非静态工厂类创建</h5><p>非静态的就稍微麻烦一点，在xml配置时需要先把工厂对象让IOC 管理。</p>
<p>factory.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Factory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> UserDao <span class="title">getUserDao</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> UserDao();</span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Bean.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">   <span class="comment">&lt;!--首先创建工厂对象--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;factory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cn.snake.Factory.Factory&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!--指定工厂对象和工厂方法--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;User&quot;</span> <span class="attr">factory-bean</span>=<span class="string">&quot;factory&quot;</span> <span class="attr">factory-method</span>=<span class="string">&quot;getUserDao&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--当不知道class的时候可以不写，比如使用第三方库的时候，没不知道该对象所在的class--&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="spring创建对象细节"><a href="#spring创建对象细节" class="headerlink" title="spring创建对象细节"></a>spring创建对象细节</h4><p>当设置对象创建设置为单例时，对象会在读取配置文件或者读取配置类时就将对象创建，也就是说单例对象的创建时间比ioc容器创建还要早；如果设置为多例时，对象则在ioc容器创建完成之后，调用时再创建对象。</p>
<p>现在有个特殊情况，单例对象想要在创建时才创建，多例对象由于不知道你要创建多少个所以不可能在ioc容器创建之前创建；</p>
<h5 id="单例模式"><a href="#单例模式" class="headerlink" title="单例模式"></a>单例模式</h5><h6 id="lazy-init属性"><a href="#lazy-init属性" class="headerlink" title="lazy-init属性"></a>lazy-init属性</h6><p>这个属性只对scope为singleton时才有效，该属性默认为false，如果改成true时，单例对象则在被调用时才创建。</p>
<h5 id="多例模式"><a href="#多例模式" class="headerlink" title="多例模式"></a>多例模式</h5><h6 id="init-method-属性和-destory-method属性"><a href="#init-method-属性和-destory-method属性" class="headerlink" title="init-method 属性和 destory-method属性"></a>init-method 属性和 destory-method属性</h6><p>如果我们想要<strong>对象在创建后，执行当前Bean中的某个方法</strong>，我们指定为init-method属性就行了。</p>
<p>如果我们想要<strong>IOC容器销毁后，执行当前Bean中的某个方法</strong>，我们指定destroy-method属性就行了。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;User&quot;</span> <span class="attr">scope</span>=<span class="string">&quot;singleton&quot;</span> <span class="attr">lazy-init</span>=<span class="string">&quot;true&quot;</span> <span class="attr">init-method</span>=<span class="string">&quot;&quot;</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">destroy-method</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h6 id="task：使用Java方式和xml方式各配置一次单例与多例的尝试"><a href="#task：使用Java方式和xml方式各配置一次单例与多例的尝试" class="headerlink" title="task：使用Java方式和xml方式各配置一次单例与多例的尝试"></a>task：使用Java方式和xml方式各配置一次单例与多例的尝试</h6><h2 id="IOC注解方式"><a href="#IOC注解方式" class="headerlink" title="IOC注解方式"></a>IOC注解方式</h2><p>通过注解来配置ioc 有两种方式，一种是xml+Java配置，一种是纯Java配置。</p>
<p>注解使用前配置步骤：</p>
<p><img src="https://gitee.com/willardteriberka/pic-bad/raw/master/imgs/%E6%9C%AA%E5%91%BD%E5%90%8D%E6%96%87%E4%BB%B6.png" alt="未命名文件"></p>
<h4 id="XML-Java"><a href="#XML-Java" class="headerlink" title="XML+Java"></a>XML+Java</h4><p>开启注解扫描器之后，通过给类或方法头写上需要的注解，即可使用。</p>
<h4 id="纯Java"><a href="#纯Java" class="headerlink" title="纯Java"></a>纯Java</h4><p>创建一个Java类为配置类，并且在该类上使用@configuration注解注上，然后在该类上使用@componentScan打开注解扫描器，并且确定注解扫描范围。</p>
<p>而后的则是根据需要注释上@service @repository @Resources，使用第三方类时使用@Bean返回第三方类的对象。</p>
<p><strong>实践后补充代码</strong></p>
<h4 id="装配第三方库组件"><a href="#装配第三方库组件" class="headerlink" title="装配第三方库组件"></a>装配第三方库组件</h4><p>由于Spring的自动装配并不能将第三方库组件装配到应用中，于是需要显式装配配置**。显示装配有两种方式，通过纯Java的方式第二种是通过xml配置文件的方式。</p>
<h5 id="通过XML装配bean"><a href="#通过XML装配bean" class="headerlink" title="通过XML装配bean"></a>通过XML装配bean</h5><p>例如装配数据库连接池 druid</p>
<h5 id="通过java代码装配bean"><a href="#通过java代码装配bean" class="headerlink" title="通过java代码装配bean"></a>通过java代码装配bean</h5><h5 id=""><a href="#" class="headerlink" title=""></a></h5><h2 id="DI"><a href="#DI" class="headerlink" title="DI"></a>DI</h2><p>数据的注入只能通过set方法或构造函数注入</p>
<h3 id="基本类型数据的注入"><a href="#基本类型数据的注入" class="headerlink" title="基本类型数据的注入"></a>基本类型数据的注入</h3><p>以注入String为例</p>
<p>service.java </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">service</span><span class="params">(String content)</span> </span>&#123; <span class="comment">//通过构造函数注入</span></span><br><span class="line">    System.out.println(<span class="string">&quot;content is &quot;</span>+ content);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Bean.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;service&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cn.snake.service.impl.service&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--注入的参数名为content 值是Hello--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;content&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Hello&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这种注入方式一般用于固定的值。</p>
<p>注解方式</p>
<p>@value 用于注入基本类型的数据和string类型的数据</p>
<h3 id="复杂类型注入"><a href="#复杂类型注入" class="headerlink" title="复杂类型注入"></a>复杂类型注入</h3><p>复杂类型分两种情况，从数据上array、list、set为一类，他们都是列表型的。map和property为一类，他们都是键值对类型的。在同类中标签可以互用。</p>
<h4 id="列表型"><a href="#列表型" class="headerlink" title="列表型"></a>列表型</h4><h5 id="通过set方法注入"><a href="#通过set方法注入" class="headerlink" title="通过set方法注入"></a>通过set方法注入</h5><p>service.Java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">service</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setList</span><span class="params">(List&lt;String&gt; list)</span></span>&#123; <span class="comment">//通过set方法注入</span></span><br><span class="line">        <span class="keyword">this</span>.list = list;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;  <span class="comment">//展示数据</span></span><br><span class="line">        System.out.println(list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Bean.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;service&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cn.snake.service.impl.service&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;list&quot;</span>&gt;</span>//查找set方法</span><br><span class="line">        <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>aa<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>bbbb<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>此处property标签中的name填写类中set方法后的成员名。</p>
<h5 id="通过构造器注入"><a href="#通过构造器注入" class="headerlink" title="通过构造器注入"></a>通过构造器注入</h5><p>service.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">service</span></span>&#123;</span><br><span class="line">    List&lt;String&gt; list;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">service</span><span class="params">(List&lt;String&gt; list)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.list = list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Bean.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;service&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cn.snake.service.impl.service&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>aaa<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>bb<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="键值对型"><a href="#键值对型" class="headerlink" title="键值对型"></a>键值对型</h4><p>在列表型中已经分别展示了复杂类型通过set和构造器，键值对不区分展示了。只展示set注入复杂类型。</p>
<p>service.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">service</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMap</span><span class="params">(Map&lt;String, String&gt; map)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.map = map;</span><br><span class="line">    &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;<span class="comment">//复杂类型展示用方法</span></span><br><span class="line"><span class="comment">//        System.out.println(list);</span></span><br><span class="line">        System.out.println(map);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Bean.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;service&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cn.snake.service.impl.service&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;No1&quot;</span> <span class="attr">value</span>=<span class="string">&quot;111&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;No2&quot;</span> <span class="attr">value</span>=<span class="string">&quot;222&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>注释部分为互用写法。</p>
<h5 id="互用"><a href="#互用" class="headerlink" title="互用"></a>互用</h5><p>上面说的互用是什么意思呢？拿set注入的方式来说，当我把Bean.xml的文件改成这样的时候，也是可以正常运的。</p>
<p>列表型:</p>
<p>Bean.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;service&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cn.snake.service.impl.service&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>aa<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>bbbb<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在property的标签中表面，我们要注入的是list，但是我们使用的是set标签，因为他们都是同样的结构，所以spring支持互用。</p>
<p>键值对型</p>
<p>Bean.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;service&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cn.snake.service.impl.service&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;No3&quot;</span>&gt;</span>333<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;No4&quot;</span>&gt;</span>444<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>该代码展示props与map标签的互用。</p>
<h3 id="Bean对象注入"><a href="#Bean对象注入" class="headerlink" title="Bean对象注入"></a>Bean对象注入</h3><p>Bean对象注入的方式只有两种，一种是通过构造函数注入，一种是通过set方法注入。通过set注入容易忘记执行，但通过构造函数注入不是我们常用的创建对象习惯，二者各有利弊。</p>
<h4 id="通过构造函数注入"><a href="#通过构造函数注入" class="headerlink" title="通过构造函数注入"></a>通过构造函数注入</h4><p>被创建对象必须要有参构造器才能实现DI的通过构造参数对象注入。</p>
<p>service.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(userdao userdao)</span></span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.userdao = userdao;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Bean.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">&lt;!--创建userdao对象--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">&quot;userdao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cn.snake.dao.userdao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--创建userservice对象--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">&quot;userservice&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cn.snake.service.userservice&quot;</span> &gt;</span></span><br><span class="line">       <span class="comment">&lt;!--通过构造器植入所用的标签是constructor-arg--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;userdao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userdao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="通过set方法注入-1"><a href="#通过set方法注入-1" class="headerlink" title="通过set方法注入"></a>通过set方法注入</h4><p>通过set方法必须要有set方法，并且set方法的对象是被注入的对象。</p>
<p>service.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserdao</span><span class="params">(userdao userdao)</span></span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.userdao = userdao;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>接下来就是xml的配置了     <em>划重点：<property>标签</em></p>
<p>Bean.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">&lt;!--创建userdao对象--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">&quot;userdao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cn.snake.dao.userdao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--创建userservice对象--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">&quot;userservice&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cn.snake.service.userservice&quot;</span> &gt;</span></span><br><span class="line">       <span class="comment">&lt;!--此时注意，通过set方法所用的标签是property--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userdao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userdao&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>name属性有语法提示，提示的内容为类中set方法后的名称，如果方法名为setName</p>
<p>Bean对象的两种注入方式做个小结：通过set方式注入使用的是<property>标签，而构造器注入则是使用<constructor-arg>标签，在xml中Bean标签内同级。</p>
<h3 id="自动装配"><a href="#自动装配" class="headerlink" title="自动装配"></a>自动装配</h3><p>有了自动装配，我们就没有只能使用set方法注入，构造器注入的困扰了，spring自动通过ioc容器查找，找到有唯一的类型时，就自动注入了。</p>
<h4 id="XML配置文件方式"><a href="#XML配置文件方式" class="headerlink" title="XML配置文件方式"></a>XML配置文件方式</h4><p>自动装配在bean标签中有个属性名叫autowire，自动装配属性有多个值可用：</p>
<p>byName：通过userservice对象中找是否对象需要被注入，如果有则通过这个对象的名称来XML的配置文件中找有没有这个Bean对象，如果用则将这个对象注入进去。这里注入有个特点，会获取这个对象的名称把首字母改成小写。</p>
<p>byType：如果使用了根据类型来自动装配，那么在IOC容器中只能有一个这样的类型，否则就会报错！</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">&lt;!--创建userdao对象--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">&quot;userdao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cn.snake.dao.userdao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--创建userservice对象--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--autowireBean标签中自动装配的属性--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">&quot;userservice&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cn.snake.service.userservice&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="注解方式"><a href="#注解方式" class="headerlink" title="注解方式"></a>注解方式</h4><p>@Autowired 注解方式的自动装配。</p>
<p>该注解可以写在要注入的变量上或者是方法(构造器方法、set方法)上。</p>
<p>auto有自己的执行流程，当要注入的对象类型中有唯一一个时，就会自动注入了；如果在ioc中发现有多个类型与当前变量类型相同（等价于xml中的bytype），则按照对象名注入（等价于xml中的byname）。</p>
<p>![autowired执行过程](C:\Users\ZAG WELL\Desktop\autowired执行过程.png)</p>
<p>@qualifier</p>
<p>用于解决使用autowired时，ioc容器中存在两个与当前注入变量类型相同，但是又不想改变量名的情况(某个类中 变量都要改的时候)；在注解对象是需要配合autowired注解使用，而在注解方法时，可以单独使用。</p>
<p>用法：@qualifier(“userdao1”)</p>
<p>service.Java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">service</span> <span class="keyword">implements</span> <span class="title">userdao_i</span></span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@Qualifier(&quot;userdao_e&quot;)</span>  <span class="comment">//指定注入userdao_e类</span></span><br><span class="line">    <span class="keyword">private</span> userdao_i userdao;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        userdao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>userdao_c.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.snake.dao.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.snake.dao.userdao_i;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">userdao_c</span> <span class="keyword">implements</span> <span class="title">userdao_i</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;保存了用户&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>userdao_e.java </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.snake.dao.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.snake.dao.userdao_i;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">userdao_e</span> <span class="keyword">implements</span> <span class="title">userdao_i</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;User saved&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在service.Java中通过@qualifier指定了当有两个同类型的对象时，指定注入返回英文信息的userdao。</p>
<p>也可以指定beanid之后指定beanid</p>
<p>userdao_e.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.snake.dao.impl;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component(&quot;English&quot;)</span><span class="comment">//指定了beanid 用于给qualifier指定注入对象用</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">userdao_e</span> <span class="keyword">implements</span> <span class="title">userdao_i</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;User saved&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>service.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.snake.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">service</span> <span class="keyword">implements</span> <span class="title">userdao_i</span></span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@Qualifier(&quot;English&quot;)</span> <span class="comment">// 注入了指定的beanid</span></span><br><span class="line">    <span class="keyword">private</span> userdao_i userdao;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        userdao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>@resource<br>@autowired 和@ qualifier的结合</p>
<p>用法：@resource(name=”userdao1”)，用法和qualifier一样</p>
<h3 id="初始化方法与销毁方法的执行"><a href="#初始化方法与销毁方法的执行" class="headerlink" title="初始化方法与销毁方法的执行"></a>初始化方法与销毁方法的执行</h3><p>@proConstruct //用于指定创建后执行的方法</p>
<p>用法:写在初始化方法上方</p>
<p>@predestroy //用于指定销毁方法 </p>
<p>用法：写在销毁方法上方</p>
<p>对于销毁方法如果使用的是ApplicationContext的子类才可用调用销毁方法，因为ApplicationContext是没有销毁方法的。</p>
<p>小结：Autowired、qualifier、resource 都不可以注入基本类型和string，只能注入其他bean类型，如果要注入基本类型和string类型则使用value注解。而集合类型只能通过xml配置文件注入。</p>
<h2 id="AOP"><a href="#AOP" class="headerlink" title="AOP"></a>AOP</h2><h3 id="预先知识"><a href="#预先知识" class="headerlink" title="预先知识"></a>预先知识</h3><p>AOP的原理其实就是代理设计模式，分动态代理和静态代理。静态代理由于需要太多的代理类所以使用动态代理，动态代理也有一个条件就是，被代理对象一定要有接口，但是很多时候并不是所有类都由我们编写，所有类都有接口实现，所以出现了cglib。</p>
<h4 id="cglib"><a href="#cglib" class="headerlink" title="cglib"></a>cglib</h4><p>一个可以对没有实现接口的类实现动态代理，可以在运行期拓展Java类和实现Java接口，而我们的重点spring AOP也内置了它。导入Spring-core-3.x.x.jar;</p>
<p>有一点需要注意的是，cglib所要代理的类不能为final或static所修饰的类。final是不可修改的，也就没办法实现我们的增强。static是创建即会执行，运行不受我们控制。</p>
<h4 id="使用cglib步骤"><a href="#使用cglib步骤" class="headerlink" title="使用cglib步骤"></a>使用cglib步骤</h4><p>创建一个代理类 实现cglib 的MethodInterceptor接口。</p>
<p>为 Enhancer 对象设置父类；</p>
<p>实现intercept方法，写出使用动态代理增强原方法的动作。</p>
<h3 id="专有名词："><a href="#专有名词：" class="headerlink" title="专有名词："></a>专有名词：</h3><p>通知（advice）：拦截到切入点后，所要执行的事。</p>
<p>​    通知分为5种：</p>
<p>​        前置通知：在切入点方法前执行的方法就叫前置通知,</p>
<p>​        后置通知：在切入点方法后执行的方法就叫后置通知,</p>
<p>​        返回通知：在切入点方法正常执行后执行的通知就叫返回通知，</p>
<p>​        异常通知：当切入点方法抛出异常后调用的方法就叫异常通知。</p>
<p>​        环绕通知：完全自己实现切面过程的就是环绕通知。</p>
<p>连接点（joinpoint）：被代理类中的所有方法；</p>
<p>切入点（pointcut）：属于连接点，但只包括被切面切入的方法。所有的切入点都是连接点，但不是所有的连接点都是切入点。</p>
<p>切面（aspect）：切面是通知和切点的结合。通知和切点共同定义了切面的全部内容–他是生命在核实和何处完成其功能；切面类也就是关注点代码，我们通常使用一个类来将这些关注点代码封装起来。</p>
<p>引入（introduction）：允许我们向现有类添加新方法或属性。</p>
<p>织入（weaving）：织入是指把切面应用到目标对象并创建新的代理对象的过程。</p>
<p>​    织入生命周期：</p>
<p>​        编译期：</p>
<p>​        类加载期：</p>
<p>​        运行期：</p>
<p>视频出现的概念</p>
<p>target(目标对象)：被代理对象。</p>
<p>proxy（代理）：一个类被aop织入增强后，产生了一个结果代理类。也就是增强后的代理对象，通过调用改对象的方法来实现通知的执行。</p>
<h3 id="切入点表达式的书写方法"><a href="#切入点表达式的书写方法" class="headerlink" title="切入点表达式的书写方法"></a>切入点表达式的书写方法</h3><p>全通配方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* *..*.*(..)</span><br></pre></td></tr></table></figure>

<p>第一个“*” 表示方法修饰符 在表达式中方法的修饰符可以省略 省略后表示所有修饰符</p>
<p>第二个“*” 表示方法返回值</p>
<p>第三个“ * ”表示包名， 而“ ..* ” 表示全通配包名 如果不想使用全通配的方法也可以使用   * <em>.</em> <em>的方式表示 如有一个类： cn.snake.util.log 使用表达式的方式书写就是   * *.</em> * <em>.</em> * <em>.</em> log.xxx</p>
<p>第四个“*”表示方法统配方法名</p>
<p>(..)表示统配参数 如果要匹配是基本类型，如int参数类型 则写成：(int) 即可，如果是复杂类型则写出该对象所在的类，如 (java.lang.String)</p>
<p>实际开发常用表达式：一般是切入到业务层的实现类方法下</p>
<p>切到业务层实现类下的方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* cn.snake.service.impl.*.*()</span><br></pre></td></tr></table></figure>



<p>在注解中使用pointcut的时候需要注解在一个空方法之上。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Pointcut(&quot;execution(* cn.snake.service.impl.service.*(..))&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">servicePointCut</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当其他注解使用该表达式时如下表达</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Before(&quot;servicePointCut()&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">berforeExe</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;占用线程&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="打开自动代理"><a href="#打开自动代理" class="headerlink" title="打开自动代理"></a>打开自动代理</h3><p>当业务层方法没有接口时，会报错BeanNotOfRequiredTypeException ，切面异常</p>
<p>这时候需要用到自动代理，此时会使用到CGLIB的库。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span> <span class="attr">proxy-target-class</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:aspectj-autoproxy</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="环绕通知"><a href="#环绕通知" class="headerlink" title="环绕通知"></a>环绕通知</h3><p>Proxy中的invoke方法与环绕通知相似，自己决定哪个方法是前置后置通知。</p>
<p>使用环绕通知需要使用一个spring提供的接口， proceedingJoinPoint </p>
<p>Bean.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;service&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cn.snake.service.impl.service&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;manager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cn.snake.util.manager&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;servcicePointCut&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* cn.snake.service.impl.service.*(..))&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:pointcut</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">&quot;manager&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:around</span> <span class="attr">method</span>=<span class="string">&quot;around&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;servcicePointCut&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:around</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>manager.java </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">around</span><span class="params">(ProceedingJoinPoint proceedingJoinPoint)</span> </span>&#123;</span><br><span class="line">    Object proceed = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;占用线程--around&quot;</span>);</span><br><span class="line">        proceed = proceedingJoinPoint.proceed(proceedingJoinPoint.getArgs());</span><br><span class="line">        System.out.println(<span class="string">&quot;方法执行成功--around&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">catch</span> (Throwable throwable) &#123;</span><br><span class="line">        throwable.printStackTrace();</span><br><span class="line">        System.out.println(<span class="string">&quot;方法执行异常，开始回滚--around&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;释放资源--around&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> proceed;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在proceed方法执行之前调用的就被视为前置方法，在proceed方法执行之后调用的就被视为后置方法，在整个环绕通知的catch中执行的就是异常通知，在整个环绕通知的finally中执行的就是最终通知。</p>
<h2 id="AOP的实现方式"><a href="#AOP的实现方式" class="headerlink" title="AOP的实现方式"></a>AOP的实现方式</h2><h3 id="纯XML"><a href="#纯XML" class="headerlink" title="纯XML"></a>纯XML</h3><ul>
<li><p>导入对应约束</p>
</li>
<li><p>将切面与service层对象交由springioc管理</p>
</li>
<li><p>使用&lt; aop:aspect &gt; 标签及其子标签完成对应需求开启aop</p>
</li>
</ul>
<p>  manager.java </p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">manager</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">berforeExe</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;占用线程&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>  service.java</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">service</span> <span class="keyword">implements</span> <span class="title">service_i</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;开始保存&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>  Bean.xml</p>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;service&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cn.snake.service.impl.service&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;manager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cn.snake.util.manager&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--&lt;aop:aspectj-autoproxy proxy-target-class=&quot;true&quot;&gt;&lt;/aop:aspectj-autoproxy&gt;--&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">&quot;manager&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">&quot;berforeExe&quot;</span> <span class="attr">pointcut</span>=<span class="string">&quot;execution(* cn.snake.service.impl.service.*(..))&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:before</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="简写pointcut"><a href="#简写pointcut" class="headerlink" title="简写pointcut"></a>简写pointcut</h4><p>  当切面方法很多的时候，我们需要写很多个重复的pointcut，这时候就使用&lt; aop:pointcut &gt;标签来提高效率。</p>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;servcicePointCut&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* cn.snake.service.impl.service.*(..))&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:pointcut</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>  书写pointcut标签的有两个地方：</p>
<ul>
<li>aop:aspect内：该pointcut只能用于当前切面。</li>
<li>aop:config内，aop:aspect外：该pointcut可以用于多个切面，但是必须写在调用该表达式的切面之前。</li>
</ul>
<p>  Bean.xml</p>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;servcicePointCut&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* cn.snake.service.impl.service.*(..))&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:pointcut</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">&quot;manager&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">&quot;berforeExe&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;servcicePointCut&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:before</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:after-returning</span> <span class="attr">method</span>=<span class="string">&quot;after_returning&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;servcicePointCut&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">aop:after-returning</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:after-throwing</span> <span class="attr">method</span>=<span class="string">&quot;after_throwing&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;servcicePointCut&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">aop:after-throwing</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:after</span> <span class="attr">method</span>=<span class="string">&quot;after&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;servcicePointCut&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:after</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="XML-Java-1"><a href="#XML-Java-1" class="headerlink" title="XML+Java"></a>XML+Java</h3><ul>
<li>开启注解扫描器</li>
<li>开启aop注解扫描器</li>
<li>为service层以及切面类进行注解 ,service层：@Service，切面类： @Component @Aspect</li>
<li>为切入点方法布置通知注解 @Before @After-Returning@After-throwing@After@Around</li>
</ul>
<p>Bean.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;cn.snake&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:aspectj-autoproxy</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>manager.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Pointcut(&quot;execution(* cn.snake.service.impl.service.*(..))&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">servicePointCut</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Before(&quot;servicePointCut()&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">berforeExe</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;占用线程&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@AfterReturning(&quot;servicePointCut()&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">after_returning</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;方法执行成功&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@AfterThrowing(&quot;servicePointCut()&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">after_throwing</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;方法执行异常，开始回滚&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@After(&quot;servicePointCut()&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">after</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;释放资源&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Around(&quot;servicePointCut()&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">around</span><span class="params">(ProceedingJoinPoint proceedingJoinPoint)</span> </span>&#123;</span><br><span class="line">    Object proceed = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;占用线程--around&quot;</span>);</span><br><span class="line">        proceed = proceedingJoinPoint.proceed(proceedingJoinPoint.getArgs());</span><br><span class="line">        System.out.println(<span class="string">&quot;方法执行成功--around&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">catch</span> (Throwable throwable) &#123;</span><br><span class="line">        throwable.printStackTrace();</span><br><span class="line">        System.out.println(<span class="string">&quot;方法执行异常，开始回滚--around&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;释放资源--around&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> proceed;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>AOP注解使用细节：当使用注解AOP时，spring有个执行顺序的问题，一般来说一个程序正常执行时，应该是前置通知–&gt;被切面方法–&gt;后置通知–&gt;最终通知。而使用注解时，最终通知与后置通知的执行顺序被对调了。但是我们可以使用环绕通知解决。</p>
<h3 id="纯Java-1"><a href="#纯Java-1" class="headerlink" title="纯Java"></a>纯Java</h3><ul>
<li>创建一个javaconfig类<ul>
<li>并使用@Configuration注解表明该类是J配置类</li>
<li>然后使用@ComponentScan()确认注解范围</li>
<li>使用 @EnableAspectJAutoProxy注解开启自动代理</li>
</ul>
</li>
<li>为service层以及切面类进行注解 ,service层：@Service，切面类： @Component @Aspect</li>
<li>为切入点方法布置通知注解 @Before @After-Returning@After-throwing@After@Around</li>
</ul>
<h3 id="AOP相关注解"><a href="#AOP相关注解" class="headerlink" title="AOP相关注解"></a>AOP相关注解</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Aspect</span> <span class="comment">//指定一个类为切面类 </span></span><br><span class="line"><span class="meta">@Pointcut(&quot;execution( cn.itcast.e_aop_anno..*(..))&quot;)</span> <span class="comment">//指定切入点表达式</span></span><br><span class="line"><span class="meta">@Before(&quot;pointCut_()&quot;)</span> <span class="comment">//前置通知: 目标方法之前执行</span></span><br><span class="line">   或 <span class="meta">@Before(&quot;execution(* aa.*.*(..))&quot;)</span><span class="comment">//单独设置拦截表达式</span></span><br><span class="line"><span class="meta">@After(&quot;pointCut_()&quot;)</span> <span class="comment">//后置通知：目标方法之后执行（始终执行）</span></span><br><span class="line">    或<span class="meta">@After(&quot;execution(* aa.*.*(..))&quot;)</span><span class="comment">//单独设置拦截表达式</span></span><br><span class="line"><span class="meta">@AfterReturning(&quot;pointCut_()&quot;)</span> <span class="comment">//返回后通知： 执行方法结束前执行(异常不执行)</span></span><br><span class="line"><span class="meta">@AfterThrowing(&quot;pointCut_()&quot;)</span> <span class="comment">//异常通知: 出现异常时候执行</span></span><br><span class="line"><span class="meta">@Around(&quot;pointCut_()&quot;)</span> <span class="comment">//环绕通知： 环绕目标方法执行</span></span><br></pre></td></tr></table></figure>



<h2 id="JdbcTemplate的使用"><a href="#JdbcTemplate的使用" class="headerlink" title="JdbcTemplate的使用"></a>JdbcTemplate的使用</h2><p>设置数据源方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">DriverManagerDataSource driverManagerDataSource = <span class="keyword">new</span> DriverManagerDataSource();</span><br><span class="line">driverManagerDataSource.setDriverClassName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">driverManagerDataSource.setUrl(<span class="string">&quot;jdbc:mysql://localhost:3306/xxx&quot;</span>);</span><br><span class="line">driverManagerDataSource.setUsername(<span class="string">&quot;admin&quot;</span>);</span><br><span class="line">driverManagerDataSource.setPassword(<span class="string">&quot;root&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>创建jdbcTemplate</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JdbcTemplate jdbcTemplate = <span class="keyword">new</span> JdbcTemplate(DriverManagerDataSource);</span><br></pre></td></tr></table></figure>

<p>把通过设置过数据源的DriverManagerDataSource放到jdbcTemplate中，创建JdbcTemplate对象，用于执行SQL语句。</p>
<p>执行SQL语句</p>
<p>不返回对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jdbcTemplate.update(<span class="string">&quot;update user set money = ? where id = ?&quot;</span>, user.getmoney(), user.getId());</span><br></pre></td></tr></table></figure>

<p>update方法，可以用于执行后没有返回值的语句，如增删改方法。</p>
<p>返回对象</p>
<p>返回对象较多情况下分两种，一种是List对象，一种是实体类对象(domain)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//返回List对象</span></span><br><span class="line">List&lt;user&gt; query = jdbcTemplate.query(sql, <span class="keyword">new</span> BeanPropertyRowMapper&lt;user&gt;(user.class));</span><br><span class="line"><span class="comment">//返回实体类对象</span></span><br><span class="line">user user = jdbcTemplate.queryForObject(<span class="string">&quot;select * from user where id = ?&quot;</span>, <span class="keyword">new</span> eanPropertyRowMapper&lt;user&gt;(user.class), id);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>两种返回对象的方法都需要自己定义泛型。</p>
<p>springsupport 待写</p>
<h2 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h2><p>数据库的事务用于保证asid法则，Atomicity（原子性）、isolation（隔离性)、duration（），事务提交时，数据库同时提交，某个语句异常时，全部取消提交。用于保证数据的一致性。</p>
<h3 id="spring对于事务的管理"><a href="#spring对于事务的管理" class="headerlink" title="spring对于事务的管理"></a>spring对于事务的管理</h3><p>spring的事务管理器，用于把事务上所有的请求都绑定在一起。形成一个单元，PlatformTransactionManager接口是spring事务管理器的接口，DataSourceTransactionManager数据源事务管理，是PlatformTransactionManager接口的实现类之一。</p>
<h3 id="DataSourceTransactionManager的使用"><a href="#DataSourceTransactionManager的使用" class="headerlink" title="DataSourceTransactionManager的使用"></a>DataSourceTransactionManager的使用</h3><p>Bean.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;DriverManagerDataSource&quot;</span> 		</span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/db_snake&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;admin&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;jdbctemplate&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;DriverManagerDataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userdao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cn.snake.dao.userdao&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byName&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcTemplate&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;jdbctemplate&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userservice&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cn.snake.service.userService&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byName&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userdao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userdao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;Transactionmanager&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置数据源给事务管理器当事务可以提交时提交--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;DriverManagerDataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--事务管理详细配置--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">&quot;interceptor&quot;</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;transactionManager&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置管理器所拦截的方法--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--name属性中可以使用‘*’作为通配符。优先级则是部分通配的高于全通配的</span></span><br><span class="line"><span class="comment">		&quot;find*&quot;部分通配</span></span><br><span class="line"><span class="comment">		&quot;*&quot;全通配</span></span><br><span class="line"><span class="comment">		--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;find*&quot;</span> <span class="attr">read-only</span>=<span class="string">&quot;true&quot;</span> <span class="attr">isolation</span>=<span class="string">&quot;DEFAULT&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;update*&quot;</span> <span class="attr">read-only</span>=<span class="string">&quot;false&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">tx:method</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--spring的事务管理基于aop--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;servicePointCut&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* cn.snake.service.*.*(..))&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:pointcut</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;interceptor&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;servicePointCut&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:advisor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>





<p>tx:advice标签的内部事务属性</p>
<p>isolation:用于指定事务的隔离级别，默认值是 DEFAULT，表示使用数据库的隔离级别。</p>
<p>propagation:用于指定事务的传播行为，默认值是REQUIRED,一定存在事务，增删改的选择;</p>
<p>查询方法选SUPPORTS。</p>
<p>read-only:用于指定事务是否只读，只能用于查询方法才能配置true属性。默认值false。</p>
<p>timeout:用于指定事务的超时时间，默认-1，表示永不超时。如果指定数值以秒为单位。</p>
<p>no-rollback-for:用于指定一个异常，当产生异常时，事务不回滚，产生其他异常时，事务回滚，没有默认值，表示任何异常都回滚。</p>
<p>rollback-for:用于指定一个异常，当产生异常时，事务回滚，产生其他异常时，事务不回滚，没有默认值，表示任何异常都回滚。                     </p>
<p>XML+Java</p>
<ul>
<li>在Bean.xml中配置事务管理器</li>
<li>开启事务注解扫描</li>
<li>在需要事务控制的类或方法上配置@Transactional，需要配置事务属性的则在注解后的括号中配置。否则一切按默认配置。</li>
</ul>
<p>开启事务注解的扫描</p>
<p>Bean.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">   <span class="comment">&lt;!-- 配置数据源--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/db_snake&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;admin&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!-- 配置事务管理器 --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> </span></span><br><span class="line"><span class="tag">         <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 开启spring对注解事务的支持--&gt;</span>	</span><br><span class="line"><span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;transactionManager&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">tx:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>userService.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Transactional(propagation= Propagation.SUPPORTS,readOnly=true)</span><span class="comment">//只读型事务的配置，如果内部有其他方法不使用该配置的话，则另外在方法中另行配置</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">userService</span> <span class="keyword">implements</span> <span class="title">userService_i</span></span>&#123;</span><br><span class="line">    <span class="comment">//需要的是读写型事务配置</span></span><br><span class="line">    <span class="meta">@Transactional(propagation= Propagation.REQUIRED,readOnly=false)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">transfer</span><span class="params">(user org, user get, <span class="keyword">double</span> money)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">double</span> org_newMoney = org.getmoney() - money;</span><br><span class="line">        <span class="keyword">double</span> get_newMoney = get.getmoney() + money;</span><br><span class="line">        org.setmoney(org_newMoney);</span><br><span class="line">        get.setmoney(get_newMoney);</span><br><span class="line"><span class="comment">//        int i = 1/0;</span></span><br><span class="line">        userdao.update(org);</span><br><span class="line">        userdao.update(get);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<p>纯Java</p>
<ul>
<li>创建一个配置类用于创建jdbctemplate、配置数据源（数据源读取properties文件内容的话要使用@PropertiesSource()注解,括号内填写properties文件名带后缀）</li>
<li>使用@EnableTransactionManager开启事务管理器</li>
</ul>
<p>配置事务管理器的属性</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">isolation</span><br><span class="line">	<span class="meta">@Transactional(isolation = Isolation.DEFAULT)</span></span><br><span class="line">    <span class="meta">@Transactional(isolation = Isolation.READ_COMMITTED)</span></span><br><span class="line">    <span class="meta">@Transactional(isolation = Isolation.READ_UNCOMMITTED)</span></span><br><span class="line">    <span class="meta">@Transactional(isolation = Isolation.REPEATABLE_READ)</span></span><br><span class="line">    <span class="meta">@Transactional(isolation = Isolation.SERIALIZABLE)</span></span><br><span class="line">propagation</span><br><span class="line">    <span class="meta">@Transactional(propagation = Propagation.SUPPORTS)</span></span><br><span class="line">    <span class="meta">@Transactional(propagation = Propagation.REQUIRED)</span></span><br><span class="line">    <span class="meta">@Transactional(propagation = Propagation.MANDATORY)</span></span><br><span class="line">    <span class="meta">@Transactional(propagation = Propagation.NESTED)</span></span><br><span class="line">    <span class="meta">@Transactional(propagation = Propagation.NEVER)</span></span><br><span class="line">    <span class="meta">@Transactional(propagation = Propagation.NOT_SUPPORTED)</span></span><br><span class="line">    <span class="meta">@Transactional(propagation = Propagation.REQUIRES_NEW)</span></span><br><span class="line">readOnly</span><br><span class="line">    <span class="meta">@Transactional(readOnly = false)</span></span><br><span class="line">    <span class="meta">@Transactional(readOnly = true)</span></span><br><span class="line">rollbackFor</span><br><span class="line">    <span class="meta">@Transactional(rollbackFor = xxx.class)</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>上面只是展示在注解中如何制定事务管理器的参数赋值，每个属性中可以用逗号来分开。如下:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Transactional(isolation = Isolation.DEFAULT,propagation = Propagation.REQUIRED,readOnly = false)</span></span><br></pre></td></tr></table></figure>







</div><div class="p-copyright"><blockquote><div class="p-copyright-author"><span class="p-copyright-key">本文作者：</span><span class="p-copytight-value"><a href="mailto:litreily@163.com">willardTeriberka</a></span></div><div class="p-copyright-link"><span class="p-copyright-key">本文链接：</span><span class="p-copytight-value"><a href="/2019/03/30/Spring/">http://willardteriberka.gitee.io/2019/03/30/Spring/</a></span></div><div class="p-copyright-note"><span class="p-copyright-key">版权声明：</span><span class="p-copytight-value">本博客所有文章除特殊声明外，均采用<a rel="nofollow" target="_blank" href="https://creativecommons.org/licenses/by-nc/4.0/"> CC BY-NC 4.0 </a>许可协议。转载请注明出处 <a href="http://willardteriberka.gitee.io">willardTeriberka的博客</a>！</span></div></blockquote></div></article><div class="p-info box"><span class="p-tags"><i class="fa fa-tag"></i><a href="/tags/Spring/">Spring</a></span></div><aside id="toc"><div class="toc-title">目录</div><nav><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring"><span class="toc-number">1.</span> <span class="toc-text">Spring</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">2.</span> <span class="toc-text">基本概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#IOC-inversion-of-control-%E6%8E%A7%E5%88%B6%E5%8F%8D%E8%BD%AC"><span class="toc-number">2.1.</span> <span class="toc-text">IOC inversion of control  控制反转</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DI-dependency-injection-%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5"><span class="toc-number">2.2.</span> <span class="toc-text">DI dependency injection 依赖注入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#spring-core%E7%9A%845%E5%A4%A7jar%E5%8C%85"><span class="toc-number">2.3.</span> <span class="toc-text">spring core的5大jar包</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%8D%E7%A7%B0%E7%A9%BA%E9%97%B4%E7%9B%B8%E5%85%B3"><span class="toc-number">3.</span> <span class="toc-text">名称空间相关</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%A0%87%E7%AD%BE%E6%9F%A5%E9%98%85"><span class="toc-number">4.</span> <span class="toc-text">配置文件标签查阅</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A8%E8%A7%A3%E7%9B%B8%E5%85%B3%E6%9F%A5%E9%98%85"><span class="toc-number">5.</span> <span class="toc-text">注解相关查阅</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IOC"><span class="toc-number">6.</span> <span class="toc-text">IOC</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8ioc%E5%AE%B9%E5%99%A8%E5%88%9B%E5%BB%BABean%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-number">6.1.</span> <span class="toc-text">使用ioc容器创建Bean对象的几种方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E9%9D%9E%E5%B7%A5%E5%8E%82%E7%B1%BB%E5%88%9B%E5%BB%BA"><span class="toc-number">6.1.1.</span> <span class="toc-text">1.非工厂类创建</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E6%97%A0%E5%8F%82%E6%9E%84%E9%80%A0"><span class="toc-number">6.1.1.1.</span> <span class="toc-text">1.无参构造</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E6%9C%89%E5%8F%82%E6%9E%84%E9%80%A0"><span class="toc-number">6.1.1.2.</span> <span class="toc-text">2.有参构造</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B"><span class="toc-number">6.1.1.2.1.</span> <span class="toc-text">1.基本类型</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-%E6%9C%89%E9%9D%9E%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B"><span class="toc-number">6.1.1.2.2.</span> <span class="toc-text">2.有非基本类型</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%B7%A5%E5%8E%82%E7%B1%BB%E5%88%9B%E5%BB%BA"><span class="toc-number">6.1.2.</span> <span class="toc-text">2.工厂类创建</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E9%9D%99%E6%80%81%E5%B7%A5%E5%8E%82%E7%B1%BB%E5%88%9B%E5%BB%BA"><span class="toc-number">6.1.2.1.</span> <span class="toc-text">1.静态工厂类创建</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E9%9D%9E%E9%9D%99%E6%80%81%E5%B7%A5%E5%8E%82%E7%B1%BB%E5%88%9B%E5%BB%BA"><span class="toc-number">6.1.2.2.</span> <span class="toc-text">2.非静态工厂类创建</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#spring%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%E7%BB%86%E8%8A%82"><span class="toc-number">6.1.3.</span> <span class="toc-text">spring创建对象细节</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F"><span class="toc-number">6.1.3.1.</span> <span class="toc-text">单例模式</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#lazy-init%E5%B1%9E%E6%80%A7"><span class="toc-number">6.1.3.1.1.</span> <span class="toc-text">lazy-init属性</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A4%9A%E4%BE%8B%E6%A8%A1%E5%BC%8F"><span class="toc-number">6.1.3.2.</span> <span class="toc-text">多例模式</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#init-method-%E5%B1%9E%E6%80%A7%E5%92%8C-destory-method%E5%B1%9E%E6%80%A7"><span class="toc-number">6.1.3.2.1.</span> <span class="toc-text">init-method 属性和 destory-method属性</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#task%EF%BC%9A%E4%BD%BF%E7%94%A8Java%E6%96%B9%E5%BC%8F%E5%92%8Cxml%E6%96%B9%E5%BC%8F%E5%90%84%E9%85%8D%E7%BD%AE%E4%B8%80%E6%AC%A1%E5%8D%95%E4%BE%8B%E4%B8%8E%E5%A4%9A%E4%BE%8B%E7%9A%84%E5%B0%9D%E8%AF%95"><span class="toc-number">6.1.3.2.2.</span> <span class="toc-text">task：使用Java方式和xml方式各配置一次单例与多例的尝试</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IOC%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F"><span class="toc-number">7.</span> <span class="toc-text">IOC注解方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#XML-Java"><span class="toc-number">7.0.1.</span> <span class="toc-text">XML+Java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BA%AFJava"><span class="toc-number">7.0.2.</span> <span class="toc-text">纯Java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A3%85%E9%85%8D%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93%E7%BB%84%E4%BB%B6"><span class="toc-number">7.0.3.</span> <span class="toc-text">装配第三方库组件</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%9A%E8%BF%87XML%E8%A3%85%E9%85%8Dbean"><span class="toc-number">7.0.3.1.</span> <span class="toc-text">通过XML装配bean</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%9A%E8%BF%87java%E4%BB%A3%E7%A0%81%E8%A3%85%E9%85%8Dbean"><span class="toc-number">7.0.3.2.</span> <span class="toc-text">通过java代码装配bean</span></a></li><li class="toc-item toc-level-5"><a class="toc-link"><span class="toc-number">7.0.3.3.</span> <span class="toc-text"></span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DI"><span class="toc-number">8.</span> <span class="toc-text">DI</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E7%9A%84%E6%B3%A8%E5%85%A5"><span class="toc-number">8.1.</span> <span class="toc-text">基本类型数据的注入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%8D%E6%9D%82%E7%B1%BB%E5%9E%8B%E6%B3%A8%E5%85%A5"><span class="toc-number">8.2.</span> <span class="toc-text">复杂类型注入</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E5%9E%8B"><span class="toc-number">8.2.1.</span> <span class="toc-text">列表型</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%9A%E8%BF%87set%E6%96%B9%E6%B3%95%E6%B3%A8%E5%85%A5"><span class="toc-number">8.2.1.1.</span> <span class="toc-text">通过set方法注入</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%9A%E8%BF%87%E6%9E%84%E9%80%A0%E5%99%A8%E6%B3%A8%E5%85%A5"><span class="toc-number">8.2.1.2.</span> <span class="toc-text">通过构造器注入</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%94%AE%E5%80%BC%E5%AF%B9%E5%9E%8B"><span class="toc-number">8.2.2.</span> <span class="toc-text">键值对型</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%92%E7%94%A8"><span class="toc-number">8.2.2.1.</span> <span class="toc-text">互用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Bean%E5%AF%B9%E8%B1%A1%E6%B3%A8%E5%85%A5"><span class="toc-number">8.3.</span> <span class="toc-text">Bean对象注入</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%9A%E8%BF%87%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E6%B3%A8%E5%85%A5"><span class="toc-number">8.3.1.</span> <span class="toc-text">通过构造函数注入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%9A%E8%BF%87set%E6%96%B9%E6%B3%95%E6%B3%A8%E5%85%A5-1"><span class="toc-number">8.3.2.</span> <span class="toc-text">通过set方法注入</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D"><span class="toc-number">8.4.</span> <span class="toc-text">自动装配</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#XML%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%96%B9%E5%BC%8F"><span class="toc-number">8.4.1.</span> <span class="toc-text">XML配置文件方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F"><span class="toc-number">8.4.2.</span> <span class="toc-text">注解方式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E6%96%B9%E6%B3%95%E4%B8%8E%E9%94%80%E6%AF%81%E6%96%B9%E6%B3%95%E7%9A%84%E6%89%A7%E8%A1%8C"><span class="toc-number">8.5.</span> <span class="toc-text">初始化方法与销毁方法的执行</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#AOP"><span class="toc-number">9.</span> <span class="toc-text">AOP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A2%84%E5%85%88%E7%9F%A5%E8%AF%86"><span class="toc-number">9.1.</span> <span class="toc-text">预先知识</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#cglib"><span class="toc-number">9.1.1.</span> <span class="toc-text">cglib</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8cglib%E6%AD%A5%E9%AA%A4"><span class="toc-number">9.1.2.</span> <span class="toc-text">使用cglib步骤</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%93%E6%9C%89%E5%90%8D%E8%AF%8D%EF%BC%9A"><span class="toc-number">9.2.</span> <span class="toc-text">专有名词：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%87%E5%85%A5%E7%82%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E4%B9%A6%E5%86%99%E6%96%B9%E6%B3%95"><span class="toc-number">9.3.</span> <span class="toc-text">切入点表达式的书写方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%93%E5%BC%80%E8%87%AA%E5%8A%A8%E4%BB%A3%E7%90%86"><span class="toc-number">9.4.</span> <span class="toc-text">打开自动代理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8E%AF%E7%BB%95%E9%80%9A%E7%9F%A5"><span class="toc-number">9.5.</span> <span class="toc-text">环绕通知</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#AOP%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F"><span class="toc-number">10.</span> <span class="toc-text">AOP的实现方式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%AFXML"><span class="toc-number">10.1.</span> <span class="toc-text">纯XML</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%80%E5%86%99pointcut"><span class="toc-number">10.1.1.</span> <span class="toc-text">简写pointcut</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#XML-Java-1"><span class="toc-number">10.2.</span> <span class="toc-text">XML+Java</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%AFJava-1"><span class="toc-number">10.3.</span> <span class="toc-text">纯Java</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AOP%E7%9B%B8%E5%85%B3%E6%B3%A8%E8%A7%A3"><span class="toc-number">10.4.</span> <span class="toc-text">AOP相关注解</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JdbcTemplate%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">11.</span> <span class="toc-text">JdbcTemplate的使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1"><span class="toc-number">12.</span> <span class="toc-text">事务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#spring%E5%AF%B9%E4%BA%8E%E4%BA%8B%E5%8A%A1%E7%9A%84%E7%AE%A1%E7%90%86"><span class="toc-number">12.1.</span> <span class="toc-text">spring对于事务的管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DataSourceTransactionManager%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">12.2.</span> <span class="toc-text">DataSourceTransactionManager的使用</span></a></li></ol></li></ol></nav></aside></div><section class="p-ext"><div class="l-pager l-pager-dtl box"><a class="prev" href="/2019/03/30/linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">&lt; Linux 常用命令</a><a class="next" href="/2019/03/29/%E9%9D%A2%E8%AF%95%E6%B1%87%E6%80%BB%E6%9C%80%E7%BB%88%E7%89%88/">面试汇总最终版 &gt;</a></div></section><footer><p>Copyright © 2016 - 2021 <a href="/." rel="nofollow">willardteriberka</a> | <strong><a rel="nofollow" target="_blank" href="https://creativecommons.org/licenses/by-nc/4.0/">CC BY-NC 4.0</a></strong><br><span id="busuanzi_container_site_uv"><i class="fa fa-user"></i><span id="busuanzi_value_site_uv"></span></span> <span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_site_pv"></span></span> | Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a>Theme with<a rel="nofollow" target="_blank" href="https://github.com/litreily/snark-hexo"> snark.</a></p></footer></div></div></div><script type="text/javascript" src="/plugins/prettify/prettify.js"></script><script type="text/javascript" src="/js/search.js"></script><script type="text/javascript" src="/js/top.js"></script><script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
    search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.1" async></script></body></html>